–ü—Ä–æ–µ–∫—Ç: –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ CI/CD



–ò–¥–µ—è: —Å–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏-—Å–∏—Å—Ç–µ–º—É –∏–∑ –¥–≤—É—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

frontend - –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Flask or React

backend - API —Å–µ—Ä–≤–∏—Å –Ω–∞ Flask, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–π –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ñ–∞–π–ª –∏–ª–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (SQLite or MongoDB)

–æ—Ç–¥–µ–ª—å–Ω—ã–π nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å—Ç–∞—Ç–∏–∫–∏ (???)

–í—Å–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ docker-compose, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è volume, networks –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è CI/CD —á–µ—Ä–µ–∑ GitHub Actions



–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: 



docker-logging-app/

‚îÇ

‚îú‚îÄ‚îÄ frontend/

‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile

‚îÇ   ‚îú‚îÄ‚îÄ app/

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html / app.py

‚îÇ

‚îú‚îÄ‚îÄ backend/

‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile

‚îÇ   ‚îú‚îÄ‚îÄ app/

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py (—Å API + –ª–æ–≥–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logs/ (volume –¥–ª—è –ª–æ–≥–æ–≤)

‚îÇ

‚îú‚îÄ‚îÄ nginx/

‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf

‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

‚îÇ

‚îú‚îÄ‚îÄ docker-compose.yml

‚îú‚îÄ‚îÄ .github/workflows/deploy.yml

‚îî‚îÄ‚îÄ README.md



–¶–µ–ª—å: –∏–∑—É—á–∏—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

Dockerfile - –Ω–∞–ø–∏—à—É Dockerfile –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

Docker Compose - –Ω–∞—Å—Ç—Ä–æ—é –¥–æ–∫–µ—Ä –∫–æ–º–ø–æ—Å —Å –æ–±—â–∏–º–∏ —Ç–æ–º–∞–º–∏, —Å–µ—Ç—è–º–∏

Volumes - –∏—Å–ø–æ–ª—å–∑—É—é —Ç–æ–º—ã –¥–ª—è –ª–æ–≥–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

Docker Networks - –Ω–∞—Å—Ç—Ä–æ—é bridge-—Å–µ—Ç–∏ –∏ —É–≤–∏–∂—É, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç

Log rotation - –Ω–∞—Å—Ç—Ä–æ—é —Ö—Ä–æ–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π 

Nginx - –Ω–∞—Å—Ç—Ä–æ—é –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ –±–µ–∫–µ–Ω–¥

CI/CD - —Å–±–æ—Ä–∫–∞ –∏ –ø—É—à –æ–±—Ä–∞–∑–æ–≤ –≤ Docker Hub or ACR

Secrets - –¥–æ–±–∞–≤–ª—é —Å–µ–∫—Ä–µ—Ç—ã –≤ git

README - —Å–æ—Å—Ç–∞–≤–ª—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–∞–∫ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å



–®–∞–≥ 1: –ø–∏—à—É docker-compose file

–≠—Ç–æ —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º —è –¥–æ–ª–∂–µ–Ω –æ–ø–∏—Å–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –∫–∞–∫ –æ–Ω–∏ —Å—Ç—Ä–æ—è—Ç—Å—è, —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è, –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏, –∏ –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç. –≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. –ü–∏—à–µ—Ç—Å—è –Ω–∞ —è–∑—ã–∫–µ YAML - —è–∑—ã–∫ –¥–∞–Ω–Ω—ã—Ö, —á—É–≤—Å—Ç–≤–∏–≤—Ç–µ–ª—å–Ω—ã–π –∫ –æ—Ç—Å—Ç—É–ø–∞–º. –û—Ç—Å—Ç—É–ø—ã –¥–µ–ª–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–∞–º–∏. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 2 –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä: 

services:

&nbsp; frontend:

&nbsp;   build: ./frontend



–†–∞–∑–±–æ—Ä —Ñ–∞–π–ª–∞ docker compose 

version: "3.8"



services:

&nbsp; frontend:

&nbsp;   build: ./frontend

&nbsp;   ports:

&nbsp;     - "80:80"

&nbsp;   depends\_on:

&nbsp;     - backend

&nbsp;   networks:

&nbsp;     - app-network



&nbsp; backend:

&nbsp;   build: ./backend

&nbsp;   volumes:

&nbsp;     - logs-volume:/app/logs

&nbsp;   expose:

&nbsp;     - "5000"

&nbsp;   networks:

&nbsp;     - app-network



&nbsp; nginx:

&nbsp;   image: nginx:latest

&nbsp;   ports:

&nbsp;     - "8080:80"

&nbsp;   volumes:

&nbsp;     - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro

&nbsp;   depends\_on:

&nbsp;     - frontend

&nbsp;   networks:

&nbsp;     - app-network



volumes:

&nbsp; logs-volume:



networks:

&nbsp; app-network:

&nbsp;   driver: bridge



**Frontend —á–∞—Å—Ç—å**

1\) version: "3.8" - —É–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ docker-compose.

2\) services: —ç—Ç–æ —Å–µ–∫—Ü–∏—è, –≥–¥–µ —Ç—ã –æ–ø–∏—Å—ã–≤–∞–µ—à—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å. –£ –Ω–∞—Å: frontend, backend, nginx

3\) build –≥–æ–≤–æ—Ä–∏—Ç Docker: —Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞–∑ –∏–∑ Dockerfile, –Ω–∞—Ö–æ–¥—è—â–µ–≥–æ—Å—è –≤ –ø–∞–ø–∫–µ ./frontend

4\) –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞ 80 –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç 80. –≠—Ç–æ –∫–∞–∫ "–æ—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞—Ä—É–∂—É".

5\) –°–∫–∞–∂–∏ Docker Compose: "–Ω–µ –∑–∞–ø—É—Å–∫–∞–π frontend, –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤ backend". –≠—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ backend —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã ‚Äî –ø—Ä–æ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω.

6\) –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ –æ–¥–Ω–æ–π –æ–±—â–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ "–≤–∏–¥–µ—Ç—å" –ø–æ –∏–º–µ–Ω–∏.



**Backend —á–∞—Å—Ç—å:** 

1\) –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –∏–∑ Dockerfile –≤ –ø–∞–ø–∫–µ ./backend

2\) –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ç–æ–º logs-volume –∫ –ø–∞–ø–∫–µ /app/logs –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

3\) –í—Å–µ –ª–æ–≥–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è —Å–Ω–∞—Ä—É–∂–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏ —Ç—ã —Å–º–æ–∂–µ—à—å –∏—Ö —á–∏—Ç–∞—Ç—å –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

4\) –≠—Ç–æ—Ç –ø–æ—Ä—Ç (5000) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏, –Ω–æ –Ω–µ –∏–∑–≤–Ω–µ. –¢–æ –µ—Å—Ç—å nginx —Å–º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è, –Ω–æ —Ç—ã —Å–Ω–∞—Ä—É–∂–∏ ‚Äî –Ω–µ—Ç. (–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç ports, –∫–æ—Ç–æ—Ä—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç –Ω–∞—Ä—É–∂—É.)

5\) –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ –æ–¥–Ω–æ–π –æ–±—â–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ "–≤–∏–¥–µ—Ç—å" –ø–æ –∏–º–µ–Ω–∏.



**Nginx —á–∞—Å—Ç—å:**

1\) –í–º–µ—Å—Ç–æ —Å–±–æ—Ä–∫–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ nginx.

2\) –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Ä—É–∂—É –ø–æ—Ä—Ç 8080 (–ª–æ–∫–∞–ª—å–Ω–æ), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ 80 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≥–¥–µ —Å–ª—É—à–∞–µ—Ç nginx).

3\) –ú–æ–Ω—Ç–∏—Ä—É–µ–º —Å–≤–æ–π –∫–æ–Ω—Ñ–∏–≥ nginx.conf –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –ø—É—Ç–∏, –≥–¥–µ nginx –µ–≥–æ –∏—â–µ—Ç. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é nginx –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –º–æ–∏ —Å–µ—Ä–≤–∏—Å—ã –∏ –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ frontend and backed. –î–ª—è —ç—Ç–æ–≥–æ –º—ã –±–µ—Ä–µ–º –Ω–∞—à –∫–æ–Ω—Ñ–∏–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å–∞–ª–∏ —á—Ç–æ –∏ –∫—É–¥–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥—Å–æ–≤—ã–≤–∞–µ–º –µ–≥–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –º–µ—Å—Ç–æ /etc/nginx/nginx.conf. –ú—ã –Ω—É–∂–¥–∞–µ–º—Å—è –≤ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä –∏ –∑–∞—Ç–µ–º –æ—Ç–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç –∏–º–µ–Ω–∏ —Å–µ–±—è. –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã frontend –∑–∞–Ω–∏–º–∞–ª—Å—è –ø–æ–∫–∞–∑–æ–º HTML or UI, a backend –∑–∞–Ω–∏–º–∞–ª—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–æ–π. –ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç backend –∏ –∫–∞–∫–∏–µ —É –º–µ–Ω—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. –Ø –ø—Ä—è—á—É –≤—Å–µ —ç—Ç–æ –∑–∞ –æ–¥–Ω–∏–º –≤—Ö–æ–¥–æ–º - nginx. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É —Ç–æ–ª—å–∫–æ nginx –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä—É–∂—É, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ docker-c–µ—Ç–∏. nginx –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –æ–±—Ä–∞—â–∞–µ—Ç—Å—è —Å–æ —Å–≤–æ–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –æ–ø–∏—Å–∞–ª–∏ –≤ –µ–≥–æ –∫–æ–Ω—Ñ. –ï—Å–ª–∏ –ø—É—Ç—å /api - –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ backend, –µ—Å–ª–∏ –ø—É—Ç—å / - –æ—Ç–¥–∞–µ—Ç HTML –∏–∑ frontend. –ë–µ–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –º–Ω–µ –±—ã –ø—Ä–∏—à–ª–æ—Å—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å CORS (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏) –∏ —ç—Ç–æ –≤—Å–µ –Ω–µ—É–¥–æ–±–Ω–æ, –∫–∞–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—Å–µ –±–æ–ª—å—à–µ

4\) :ro ‚Äî read-only (–Ω–µ –¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø—Ä–∞–≤–æ –µ–≥–æ –º–µ–Ω—è—Ç—å).



**volumes:**

–°–æ–∑–¥–∞—ë–º –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π volume, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã (–ª–æ–≥–∏) –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.



**Networks:** 

–°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –ø–æ –∏–º–µ–Ω–∏ (backend, frontend, nginx).



–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: docker-compose up --build

–ï—Å–ª–∏ –≤—Å–µ –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–æ —É–≤–∏–∂—É –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞, –æ–Ω–∞ –±—É–¥–µ—Ç —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –∏–ª–∏ –æ—à–∏–±–∫–æ–π –≤ dockerfile or nginx.conf



**–®–∞–≥ 2: —Å–æ–∑–¥–∞–µ–º –Ω–∞—à –±—ç–∫ –∏ —Ñ—Ä–æ–Ω—Ç. –ü–∏—à—É –∫ –Ω–∏–º dockerfile –∏ –∑–∞–ø—É—Å–∫–∞—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**

Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ on python –¥–ª—è backend:



from flask import Flask, request

import datetime

import os



app = Flask(\_\_name\_\_)



LOG\_DIR = "logs"

os.makedirs(LOG\_DIR, exist\_ok=True)



@app.route("/")

def home():

&nbsp;   return "Backend is running", 200



@app.route("/log", methods=\["POST"])

def log():

&nbsp;   content = request.get\_json()

&nbsp;   with open(f"{LOG\_DIR}/log.txt", "a") as f:

&nbsp;       f.write(f"{datetime.datetime.now()}: {content}\\n")

&nbsp;   return {"status": "logged"}, 200



if \_\_name\_\_ == "\_\_main\_\_":

&nbsp;   app.run(host="0.0.0.0", port=5000)



Flask - —ç—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞ python, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å http-–∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–¥–∞–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã

1\) –ø–æ–¥–∫–ª—é—á–∞–µ–º –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏ - flask, request - —á–∏—Ç–∞—Ç—å, —á—Ç–æ –ø—Ä–∏—Å–ª–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, datetime - –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –≤ –ª–æ–≥–∏, os - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–∞–ø–∫–∞–º–∏

2\) —Å–æ–∑–¥–∞–µ–º —ç–∫—Å–∑–µ–º–ø–ª—è—Ä flask - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–∑—ã–≤–∞–µ–º –µ–≥–æ app. –ú–æ—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 

3\) –ø–∏—à–µ–º –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–ø–∫–∏ logs, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å - –Ω–µ —Ä—É–≥–∞–π—Å—è

4\) –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –ø–æ –∞–¥—Ä–µ—Å—É /, –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º: —Ç–µ–∫—Å—Ç backend is running –∏ —Å—Ç—É—Ç—É—Å 200 (–û–ö). –ö –ø—Ä–∏–º–µ—Ä—É, –µ—Å–ª–∏ –∑–∞–π—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É curl http://localhost:5000/ -> –ø–æ–ª—É—á–∞–µ–º backend is running

5\) 

@app.route("/log", methods=\["POST"]) - —Å–æ–∑–¥–∞–µ–º –º–∞—Ä—à—Ä—É—Ç /log, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å—ã (—Ç–æ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ö–æ–¥ –≤ –±—Ä–∞—É–∑–µ—Ä)

def log():

&nbsp;   content = request.get\_json() - –±–µ—Ä–µ–º JSON –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å–ª–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

&nbsp;   with open(f"{LOG\_DIR}/log.txt", "a") as f: - –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª logs/log.txt –¥–ª—è –¥–æ–∑–∞–ø–∏—Å–∏ - a = append

&nbsp;       f.write(f"{datetime.datetime.now()}: {content}\\n") - –ø–∏—à–µ–º –≤ —Ñ–∞–π–ª —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª

&nbsp;   return {"status": "logged"}, 200 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ JSON - –æ—Ç–≤–µ—Ç

6\) –ø–æ—Å–ª–µ–¥–Ω—è—è —á–∞—Å—Ç—å - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ Flask. host 0.0.0.0 - –æ–∑–Ω–∞—á–∞–µ—Ç: —Å–ª—É—à–∞–π –Ω–∞ –≤—Å–µ—Ö IP-–∞–¥—Ä–µ—Å–∞—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—á—Ç–æ–±—ã –±—ã–ª –¥–æ—Å—Ç—É–ø –∏–∑ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) –∏ –≤—ã–±—Ä–∞–ª –ø–æ—Ä—Ç 5000 (—Ç–∏–ø–∏—á–Ω–æ –¥–ª—è —Ñ–ª—è—Å–∫–∞). if \_\_name\_\_ == "\_\_main\_\_": - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é. –ü–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ. –ù–∞–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞, —á—Ç–æ–±—ã –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é, –∞ –Ω–µ –ø—Ä–∏ –µ–≥–æ –∏–º–ø–æ—Ä—Ç–µ –∫–∞–∫ –º–æ–¥—É–ª—è, —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –∏ –∏—Å–ø–æ–Ω—è–µ–º—ã–º, –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç–º—ã–º, –Ω–µ –º–µ—à–∞—è –ª–æ–≥–∏–∫–µ



**Dockerfile backend:** 

FROM python:3.10-slim



WORKDIR /app - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –¥–∞–µ–º –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ

&nbsp;

COPY /app /app/ - –∫–æ–ø–∏—Ä—É–µ–º —Å –Ω–∞—à–µ–π –ø–∞–ø–∫–∏ –∞–ø–ø –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–ø–ø



RUN pip install flask



CMD \["python", "main.py"]



**Frontend HTML  -** –ø–∏—à—É —Å–∞–º—ã–π –±–∞–Ω–∞–ª—å–Ω—ã–π, –ø—Ä–æ—Å—Ç–æ–π HTML —Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 

<!DOCTYPE html>

<html lang="en">

<head>

&nbsp; <meta charset="UTF-8">

&nbsp; <title>Frontend</title>

</head>

<body>

&nbsp; <h1>Hello from Frontend!</h1>

&nbsp; <p>This is served by Nginx in a Docker container.</p>

</body>

</html>



**Dockerfile frontend:**

FROM nginx:alpine



COPY app/index.html /usr/share/nginx/html/index.html



–¢–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ–π dockerfile, –ø–æ—Ç–æ–º—É —á—Ç–æ nginx —É–∂–µ —É–º–µ–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å HTML-—Ñ–∞–π–ª—ã, –Ω–∞–º –Ω–µ –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä. –≠—Ç–æ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–¥–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–µ–Ω–¥–∏–Ω–≥–∏, SPA). –ú—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —ç—Ç–æ—Ç frontend –ø–æ–∑–∂–µ –Ω–∞ React/Vue –∏ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å build/ –ø–∞–ø–∫—É —Ç—É–¥–∞



–®–∞–≥ 4: –ø–æ–¥–∫–ª—é—á–∏—Ç—å nginx –∫–∞–∫ reverse proxy

Frontend –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–∞ –ø–æ—Ä—Ç 80, backend —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 5000 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, –∫—É–¥–∞ –∏–¥—Ç–∏: frontend and backend –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å–Ω–∞—Ä—É–∂–∏. –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ –∑–∞—Ö–æ–¥–∏–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ñ—Ä–æ–Ω—Ç–∞, –∞ –º–æ–π nginx —É–∂–µ: –æ—Ç–¥–∞–≤–∞–ª /index.html —Å —Ñ—Ä–æ–Ω—Ç–∞ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª /api/log –Ω–∞ backend

–ü–ª–∞–Ω: —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª nginx.conf, –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ nginx/ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤ docker-compose.yml –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø—Ä–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ front and back



events {}



http {

&nbsp; server {

&nbsp;   listen 80;



&nbsp;   # –û—Ç–¥–∞—ë–º frontend

&nbsp;   location / {

&nbsp;     proxy\_pass http://frontend:80;

&nbsp;   }



&nbsp;   # –ü—Ä–æ–∫—Å–∏—Ä—É–µ–º –Ω–∞ backend

&nbsp;   location /api/ {

&nbsp;     proxy\_pass http://backend:5000/;

&nbsp;   }

&nbsp; }

}



location / - –≤—Å–µ, —á—Ç–æ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /api/ - > frontend

location /api/ - –≤—Å–µ, —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /api/ -> backend

–ò–º–µ–Ω–∞ frontend and backend - —ç—Ç–æ –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ docker-compose, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–Ω—ã –≤–Ω—É—Ç—Ä–∏ "app-network"



–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞—à docker compose: docker compose up --build –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–±–æ—Ç—É —Ñ—Ä–æ–Ω—Ç–∞ –∏ –±–µ–∫–∞. –î–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –≥–¥–µ –ø–æ–ª—É—á–∞–µ–º our HTML's. –î–ª—è –±–µ–∫–∞ –≤ power shell –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º 

Invoke-RestMethod -Uri http://localhost:8081/api/log -Method POST -Body '{"msg":"Hello"}' -ContentType "application/json"



–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ 

–ü—Ä–æ–±–ª–µ–º—ã: –ø–æ—Ä—Ç 80 –±—ã–ª –∑–∞–Ω—è—Ç, –ø–æ—ç—Ç–æ–º—É —è –ø–µ—Ä–µ–∫–∏–Ω—É–ª –Ω–∞ –ø–æ—Ä—Ç 81. –ü–æ—Ä—Ç—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏ –Ω–∞ –±–µ–∫–µ —è —É–±—Ä–∞–ª, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ—Ç —Ç–∞–∫–æ–π –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –Ω–∞—Ä—É–∂—É. –í —Å–ª—É—á–∞–µ nginx –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞—Ç—å –µ–º—É –ø–æ—Ä—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å–Ω–∞—Ä—É–∂–∏. –ê —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é —Å–µ—Ç–∏. –í —Ñ–∞–π–ª–µ nginx.cong —è –æ–ø–∏—Å–∞–ª –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç–∞ –∏—Å–∫–∞—Ç—å —Ñ—Ä–æ–Ω—Ç –∏ –±–µ–∫ 

location / {

&nbsp; proxy\_pass http://frontend:80;

}



location /api/ {

&nbsp; proxy\_pass http://backend:5000;

}

Nginx –±—É–¥–µ—Ç—å –∏—Å–∫–∞—Ç—å DNS-–∏–º—è frontend –∏–ª–∏ backend –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–π Docker-—Å–µ—Ç–∏ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ app-network) –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –Ω–∏–º –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É 80 –∏–ª–∏ 5000.

–ü—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —è –Ω–µ –≤–∏–¥–µ–ª –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç –ª–æ–≥–∏ –≤ –±–µ–∫–µ - –æ–Ω–∏ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞ –Ω–µ –Ω–∞ –º–æ–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –Ω—É–∂–Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏ –æ—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É —Å –ª–æ–∞–≥–º–∏. –í –ª–æ–≥–∞—Ö —è –≤–∏–∂—É —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–∫–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Å–æ —Å–≤–æ–µ–π –º–∞—à–∏–Ω—ã. –¢–∞–∫ –∂–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å –ª–æ–≥–∞–º–∏ –Ω–∞ –º–æ—é –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å –ø–æ–º–æ—â—å—é docker cp.



–ò—Ç–æ–≥–∏: –Ø –Ω–∞—É—á–∏–ª—Å—è –ø–∏—Å–∞—Ç—å docker-compose.yml –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –Ω–µ–≥–æ —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –û–ø–∏—Å–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–∫–ª—é—á–∏–ª custom network –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏ volume-—Ç–æ–º—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.



–í backend-—Å–µ—Ä–≤–∏—Å–µ —è –ø–æ–¥–∫–ª—é—á–∏–ª –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π volume –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤. –î–ª—è nginx —è —Å–æ–∑–¥–∞–ª –∏ –ø–æ–¥–∫–ª—é—á–∏–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (nginx.conf), —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–æ–∏–ª reverse proxy –Ω–∞ frontend –∏ backend.



–Ø –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ—Å—Ç–æ–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è backend –∏ –±–∞–∑–æ–≤—ã–π HTML-—Ñ–∞–π–ª –¥–ª—è frontend. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–ª –æ—Ç–¥–µ–ª—å–Ω—ã–π Dockerfile, –æ–ø–∏—Å–∞–ª –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –ø–æ–Ω—è–ª, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑–Ω—É—Ç—Ä–∏ ‚Äî –≤–∫–ª—é—á–∞—è WORKDIR, CMD, COPY –∏ –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã.



–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ Docker Compose: services, networks, volumes, depends\_on, build



–ü–æ–Ω—è–ª –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ proxy\_pass, –∏–º–µ–Ω DNS –≤ —Å–µ—Ç–∏, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ—Ä—Ç–æ–≤ –∏ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É localhost –∏ –∏–º—è\_—Å–µ—Ä–≤–∏—Å–∞



&nbsp;–ß—Ç–æ —Ç–∞–∫–æ–µ volumes –≤ Docker?

Volume ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —á—Ç–æ–±—ã:



–î–∞–Ω–Ω—ã–µ –Ω–µ —É–¥–∞–ª—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞



–ò–º–∏ –º–æ–≥–ª–∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤



–¢—ã –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º —Å —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—ã –∏–ª–∏ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞



üìâ –ë–µ–∑ volume ‚Äî –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏—Å—á–µ–∑–∞—é—Ç

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä = –≤—Ä–µ–º–µ–Ω–Ω—ã–π, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å.



–ï—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É —Ç–µ–±—è —Ñ–∞–π–ª /app/logs/log.txt, —Ç–æ:



–æ–Ω –±—É–¥–µ—Ç –∂–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∂–∏–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä



–ø—Ä–∏ docker compose down –∏–ª–∏ docker rm ‚Äî –≤—Å—ë –∏—Å—á–µ–∑–Ω–µ—Ç



üìå –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫—ç—à, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚Äî –≤—Å—ë –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω–æ, –µ—Å–ª–∏ —Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å volume.



‚úÖ –ö–æ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å volumes

Use Case	–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω volume

üìë –õ–æ–≥–∏	–ß—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∑–∞–ø–∏—Å–∏ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö	–î–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–∞—Ç—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

üß™ –û–±–º–µ–Ω —Ñ–∞–π–ª–∞–º–∏	–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–∏—à—É—Ç/—á–∏—Ç–∞—é—Ç –≤ –æ–¥–Ω–æ –º–µ—Å—Ç–æ

üîç –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏	–¢—ã —Ö–æ—á–µ—à—å –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞



üîß –¢–∏–ø—ã volumes –≤ Docker Compose

1\. Named volume (–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π)

–≠—Ç–æ —Ç–æ, —á—Ç–æ —Ç—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª:



yaml

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

volumes:

&nbsp; - logs-volume:/app/logs

logs-volume ‚Äî –∏–º—è (Docker —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –µ–≥–æ –∏ —Ö—Ä–∞–Ω–∏—Ç –≥–¥–µ-—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ, –æ–±—ã—á–Ω–æ /var/lib/docker/volumes/...)



/app/logs ‚Äî –ø—É—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞



–û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ volume –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º



üìé –í–Ω–∏–∑—É docker-compose.yml —Ç—ã –¥–æ–ª–∂–µ–Ω –æ–±—ä—è–≤–∏—Ç—å:



yaml

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

volumes:

&nbsp; logs-volume:

2\. Bind mount (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ)

yaml

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

volumes:

&nbsp; - ./backend/app/logs:/app/logs

–õ–µ–≤–∞—è —á–∞—Å—Ç—å (./...) ‚Äî —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ –Ω–∞ —Ç–≤–æ—ë–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ



–ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å (/app/logs) ‚Äî –ø—É—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ



–≠—Ç–æ —É–¥–æ–±–Ω–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: —Ç—ã –º–æ–∂–µ—à—å —Å—Ä–∞–∑—É –≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç



üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: named volume vs bind mount

–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞	Named Volume	Bind Mount (./folder)

–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Docker	‚úÖ –î–∞	‚ùå –ù–µ—Ç (—É–ø—Ä–∞–≤–ª—è–µ—à—å —Å–∞–º)

–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å	‚úÖ –•–æ—Ä–æ—à–∞—è	‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –û–°/–ø—É—Ç–∏

–î–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ	‚ùå –°–ª–æ–∂–Ω–æ	‚úÖ –ü—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø–∞–ø–∫–µ

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å	‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω	‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å —É—è–∑–≤–∏–º

–£–¥–æ–±—Å—Ç–≤–æ –≤ –ø—Ä–æ–¥–µ	‚úÖ	‚ùå –õ—É—á—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å



üîç –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç backend –±–µ–∑ volume

–ï—Å–ª–∏ —Ç—ã –Ω–µ –¥–æ–±–∞–≤–∏—à—å volume:



yaml

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

backend:

&nbsp; build: ./backend

‚Üí –¢–æ–≥–¥–∞ –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, /app/logs/log.txt)

‚Üí –ò –∏—Å—á–µ–∑–Ω—É—Ç –ø—Ä–∏ docker compose down –∏–ª–∏ docker rm



üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å volume

bash

–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

docker volume ls            # —Å–ø–∏—Å–æ–∫ —Ç–æ–º–æ–≤

docker volume inspect –∏–º—è   # –≥–¥–µ —Ä–µ–∞–ª—å–Ω–æ –ª–µ–∂–∏—Ç

docker volume rm –∏–º—è        # —É–¥–∞–ª–∏—Ç—å

‚úÖ –í—ã–≤–æ–¥ ‚Äî –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å volume

–ò—Å–ø–æ–ª—å–∑—É–π volume, –∫–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –∏—Å—á–µ–∑–Ω—É—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: —ç—Ç–æ –ª–æ–≥-—Ñ–∞–π–ª—ã, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ñ–∏–≥–∏, –∫—ç—à ‚Äî –≤—Å—ë, —á—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ.





